/*! ptag 2014-12-21 */
!function(a,b){"use strict";var c={parseTags:function(a){var b=a.replace(/X\s*/g,",").replace(/X+/g,",").replace(/[X\s]+$/,"").replace(/^[,\s]+/,"");return tagBox.clean(b).split(",")},buildOptions:function(a){var d=c.parseTags(a),e=b("#surcus_ptag_selector");e.empty(),e.append(b("<option />").text("Not Set")),b.each(d,function(a,c){if(c.trim().length){var d=b("<option />").text(c).val(c);c===b("#selected_surcus_ptag").val()&&d.prop("selected",!0),e.append(d)}})}};b(document).ready(function(){c.buildOptions(b(".the-tags").text()),setTimeout(function(){c.buildOptions(b(".tagchecklist").find("span").text())},1e3)}),b(document).on("click",".tagadd, .ntdelbutton",function(){c.buildOptions(b(".tagchecklist").find("span").text())}),b(document).on("change","#surcus_ptag_selector",function(){b(".surcus-ptag__tag").text(b(this).val())}),b(document).on("click",".surcus_ptag__cancel",function(){b(".surcus-ptag__tag").text(b("#selected_surcus_ptag").val()),b(".surcus-ptag__edit").slideToggle(),c.buildOptions(b(".tagchecklist").find("span").text())}),b(document).on("click",".surcus_ptag__confirm",function(){b(".surcus-ptag__edit").slideToggle()})}(window,jQuery);